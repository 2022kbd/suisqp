<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Survey & Report Tool | Grade 5 English</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f7ff;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .school-info {
            margin-top: 15px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.1);
            display: inline-block;
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .survey-section {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .survey-section:hover {
            transform: translateY(-5px);
        }
        
        .section-title {
            color: #2a5298;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e6f0ff;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #ff7e5f;
        }
        
        .question {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #1e3c72;
            font-weight: 600;
        }
        
        .options-container {
            margin-bottom: 25px;
        }
        
        .option {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f8fbff;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .option:hover {
            background-color: #e6f0ff;
            border-color: #a8c6ff;
        }
        
        .option.selected {
            background-color: #d4e4ff;
            border-color: #2a5298;
        }
        
        .option input {
            margin-right: 12px;
            transform: scale(1.3);
        }
        
        .option label {
            font-size: 1.1rem;
            cursor: pointer;
            flex-grow: 1;
        }
        
        .checkbox-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        @media (max-width: 600px) {
            .checkbox-options {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }
        
        .submit-btn {
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px auto;
            width: 200px;
        }
        
        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 126, 95, 0.4);
        }
        
        .submit-btn:active {
            transform: scale(0.98);
        }
        
        .report-section {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-top: 30px;
        }
        
        .report-title {
            color: #2a5298;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e6f0ff;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .report-title i {
            color: #4CAF50;
        }
        
        .report-instructions {
            background-color: #f8fbff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #2a5298;
        }
        
        .report-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #1e3c72;
            font-size: 1.1rem;
        }
        
        .form-group input, .form-group textarea {
            padding: 12px 15px;
            border: 2px solid #e6f0ff;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            border-color: #2a5298;
            outline: none;
        }
        
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .generate-report-btn {
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px auto;
            width: 250px;
        }
        
        .generate-report-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            background-color: #f8fbff;
            display: none;
        }
        
        .result-title {
            color: #2a5298;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .student-count {
            text-align: center;
            font-size: 1.2rem;
            color: #ff7e5f;
            margin: 15px 0;
            font-weight: 600;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #e0e0e0;
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .congrats {
            text-align: center;
            color: #4CAF50;
            margin: 20px 0;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .reset-btn {
            background: linear-gradient(to right, #6c757d, #adb5bd);
            color: white;
            border: none;
            padding: 8px 15px;
            font-size: 0.9rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin-left: 10px;
        }
        
        .reset-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(108, 117, 125, 0.4);
        }
        
        .empty-chart-message {
            text-align: center;
            color: #999;
            font-style: italic;
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Travel Experience Survey & Report</h1>
            <p class="subtitle">Grade 5 English - Concordia International School Shanghai</p>
            <div class="school-info">
                <i class="fas fa-graduation-cap"></i> Longman Express 5A - Chapter 6: Travel & Adventure
            </div>
        </header>
        
        <div class="main-content">
            <!-- Survey 1: Travel Frequency -->
            <section class="survey-section">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 class="section-title"><i class="fas fa-plane-departure"></i> Survey 1: Travel Frequency</h2>
                    <button class="reset-btn" onclick="resetSurvey1()">
                        <i class="fas fa-redo"></i> Reset Data
                    </button>
                </div>
                <p class="question">How many times have you traveled outside China?</p>
                
                <div class="options-container">
                    <div class="option" onclick="selectOption(this, 'never')">
                        <input type="radio" id="never" name="travel-frequency" value="never">
                        <label for="never">A - Never</label>
                    </div>
                    <div class="option" onclick="selectOption(this, 'once')">
                        <input type="radio" id="once" name="travel-frequency" value="once">
                        <label for="once">B - Once</label>
                    </div>
                    <div class="option" onclick="selectOption(this, 'twice')">
                        <input type="radio" id="twice" name="travel-frequency" value="twice">
                        <label for="twice">C - Twice</label>
                    </div>
                    <div class="option" onclick="selectOption(this, '3-4')">
                        <input type="radio" id="3-4" name="travel-frequency" value="3-4">
                        <label for="3-4">D - 3â€“4 times</label>
                    </div>
                    <div class="option" onclick="selectOption(this, '5+')">
                        <input type="radio" id="5+" name="travel-frequency" value="5+">
                        <label for="5+">E - More than 5 times</label>
                    </div>
                </div>
                
                <button class="submit-btn" onclick="submitSurvey1()">
                    <i class="fas fa-chart-bar"></i> Submit & Show Results
                </button>
                
                <div class="chart-container">
                    <canvas id="frequencyChart"></canvas>
                    <div id="frequencyEmptyMessage" class="empty-chart-message" style="display: none;">
                        <i class="fas fa-chart-bar" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                        No data yet. Submit your answer to see the chart!
                    </div>
                </div>
                
                <div class="student-count" id="survey1-count">0 students have responded</div>
            </section>
            
            <!-- Survey 2: Popular Destinations -->
            <section class="survey-section">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 class="section-title"><i class="fas fa-globe-americas"></i> Survey 2: Popular Destinations</h2>
                    <button class="reset-btn" onclick="resetSurvey2()">
                        <i class="fas fa-redo"></i> Reset Data
                    </button>
                </div>
                <p class="question">Which countries have you visited? (Select all that apply)</p>
                
                <div class="options-container checkbox-options">
                    <div class="option" onclick="toggleCountry(this, 'japan')">
                        <input type="checkbox" id="japan" value="japan">
                        <label for="japan">Japan</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'malaysia')">
                        <input type="checkbox" id="malaysia" value="malaysia">
                        <label for="malaysia">Malaysia</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'korea')">
                        <input type="checkbox" id="korea" value="korea">
                        <label for="korea">Korea</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'thailand')">
                        <input type="checkbox" id="thailand" value="thailand">
                        <label for="thailand">Thailand</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'uk')">
                        <input type="checkbox" id="uk" value="uk">
                        <label for="uk">The UK</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'usa')">
                        <input type="checkbox" id="usa" value="usa">
                        <label for="usa">The USA</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'australia')">
                        <input type="checkbox" id="australia" value="australia">
                        <label for="australia">Australia</label>
                    </div>
                    <div class="option" onclick="toggleCountry(this, 'singapore')">
                        <input type="checkbox" id="singapore" value="singapore">
                        <label for="singapore">Singapore</label>
                    </div>
                </div>
                
                <button class="submit-btn" onclick="submitSurvey2()">
                    <i class="fas fa-chart-pie"></i> Submit & Show Results
                </button>
                
                <div class="chart-container">
                    <canvas id="destinationChart"></canvas>
                    <div id="destinationEmptyMessage" class="empty-chart-message" style="display: none;">
                        <i class="fas fa-chart-pie" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                        No data yet. Submit your answer to see the chart!
                    </div>
                </div>
                
                <div class="student-count" id="survey2-count">0 students have responded</div>
            </section>
        </div>
        
        <!-- Report Writing Section -->
        <section class="report-section">
            <h2 class="report-title"><i class="fas fa-file-alt"></i> Travel Report Writing</h2>
            
            <div class="report-instructions">
                <p><strong>Writing Task:</strong> Based on our class survey results and your own travel experiences, write a report about travel preferences and experiences.</p>
                <p><strong>Remember to include:</strong></p>
                <ul>
                    <li>Introduction with the purpose of the report</li>
                    <li>Summary of class survey results</li>
                    <li>Your personal travel experiences</li>
                    <li>Your favorite destination and why</li>
                    <li>Conclusion with your thoughts about travel</li>
                </ul>
                <p>Use vocabulary from Chapter 6: travel, adventure, destination, experience, culture, etc.</p>
            </div>
            
            <form class="report-form" id="reportForm">
                <div class="form-group">
                    <label for="reportTitle">Report Title:</label>
                    <input type="text" id="reportTitle" placeholder="e.g., My Travel Experiences and Class Survey Results" required>
                </div>
                
                <div class="form-group">
                    <label for="surveySummary">Class Survey Summary:</label>
                    <textarea id="surveySummary" placeholder="Summarize what you learned from the class surveys. Which travel frequency was most common? Which destinations were most popular?" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="personalExperience">Your Personal Travel Experience:</label>
                    <textarea id="personalExperience" placeholder="Describe your own travel experiences. Where have you been? What did you do and see?" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="favoriteDestination">Your Favorite Destination:</label>
                    <textarea id="favoriteDestination" placeholder="Which country or city is your favorite travel destination? Why do you like it? What makes it special?" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="conclusion">Conclusion:</label>
                    <textarea id="conclusion" placeholder="What have you learned from this survey and report? How does travel help us learn about other cultures?" required></textarea>
                </div>
            </form>
            
            <button class="generate-report-btn pulse" onclick="generateReport()">
                <i class="fas fa-file-download"></i> Generate My Report
            </button>
            
            <div class="result-container" id="reportResult">
                <h3 class="result-title">Your Travel Report</h3>
                <div id="reportContent"></div>
                <div class="congrats">
                    <i class="fas fa-award"></i> Excellent work! You've completed your travel report!
                </div>
                <button class="submit-btn" onclick="printReport()" style="margin-top: 15px;">
                    <i class="fas fa-print"></i> Print Report
                </button>
            </div>
        </section>
        
        <footer>
            <p>Designed for Concordia International School Shanghai - Grade 5 English Class</p>
            <p>Longman Express 5A - Chapter 6: Travel & Adventure | Interactive Learning Tool</p>
        </footer>
    </div>

    <script>
        // Initialize variables for survey data - ALL SET TO ZERO
        let survey1Data = {
            "Never": 0,
            "Once": 0,
            "Twice": 0,
            "3-4 times": 0,
            "More than 5 times": 0
        };
        
        let survey2Data = {
            "Japan": 0,
            "Malaysia": 0,
            "Korea": 0,
            "Thailand": 0,
            "The UK": 0,
            "The USA": 0,
            "Australia": 0,
            "Singapore": 0
        };
        
        let survey1Responses = 0;
        let survey2Responses = 0;
        
        // Chart instances
        let frequencyChart = null;
        let destinationChart = null;
        
        // Track if charts have been initialized
        let chartsInitialized = false;
        
        // Initialize charts on page load
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
        });
        
        function initCharts() {
            const frequencyCtx = document.getElementById('frequencyChart').getContext('2d');
            const destinationCtx = document.getElementById('destinationChart').getContext('2d');
            
            // Chart 1: Travel Frequency (Bar Chart)
            frequencyChart = new Chart(frequencyCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(survey1Data),
                    datasets: [{
                        label: 'Number of Students',
                        data: Object.values(survey1Data),
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Travel Frequency - Class Results',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Students'
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    if (value % 1 === 0) {
                                        return value;
                                    }
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Times Traveled Outside China'
                            }
                        }
                    }
                }
            });
            
            // Chart 2: Popular Destinations (Pie Chart)
            destinationChart = new Chart(destinationCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(survey2Data),
                    datasets: [{
                        label: 'Visits',
                        data: Object.values(survey2Data),
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(201, 203, 207, 0.7)',
                            'rgba(255, 99, 132, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)',
                            'rgb(255, 159, 64)',
                            'rgb(201, 203, 207)',
                            'rgb(255, 99, 132)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                font: {
                                    size: 12
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Popular Travel Destinations - Class Results',
                            font: {
                                size: 16
                            }
                        }
                    }
                }
            });
            
            chartsInitialized = true;
            
            // Initially hide charts and show empty messages
            document.getElementById('frequencyChart').style.display = 'none';
            document.getElementById('frequencyEmptyMessage').style.display = 'block';
            document.getElementById('destinationChart').style.display = 'none';
            document.getElementById('destinationEmptyMessage').style.display = 'block';
        }
        
        // Helper function to select an option in survey 1
        function selectOption(optionElement, value) {
            // Remove selected class from all options
            document.querySelectorAll('.survey-section:nth-child(1) .option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            optionElement.classList.add('selected');
            
            // Check the corresponding radio button
            document.getElementById(value).checked = true;
        }
        
        // Helper function to toggle country selection in survey 2
        function toggleCountry(optionElement, country) {
            optionElement.classList.toggle('selected');
            const checkbox = document.getElementById(country);
            checkbox.checked = !checkbox.checked;
        }
        
        // Submit survey 1
        function submitSurvey1() {
            const selectedOption = document.querySelector('input[name="travel-frequency"]:checked');
            
            if (!selectedOption) {
                alert("Please select an option before submitting!");
                return;
            }
            
            // Map the value to the correct key
            let key = "";
            switch(selectedOption.value) {
                case "never": key = "Never"; break;
                case "once": key = "Once"; break;
                case "twice": key = "Twice"; break;
                case "3-4": key = "3-4 times"; break;
                case "5+": key = "More than 5 times"; break;
            }
            
            // Update data
            survey1Data[key]++;
            survey1Responses++;
            
            // Show chart if it was hidden
            if (document.getElementById('frequencyChart').style.display === 'none') {
                document.getElementById('frequencyChart').style.display = 'block';
                document.getElementById('frequencyEmptyMessage').style.display = 'none';
            }
            
            // Update chart
            frequencyChart.data.datasets[0].data = Object.values(survey1Data);
            frequencyChart.update();
            
            // Update response count
            document.getElementById('survey1-count').textContent = `${survey1Responses} student${survey1Responses !== 1 ? 's' : ''} ha${survey1Responses !== 1 ? 've' : 's'} responded`;
            
            // Play success sound
            playSuccessSound();
            
            // Reset selection
            document.querySelectorAll('.survey-section:nth-child(1) .option').forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input').checked = false;
            });
            
            // Show success message
            showNotification("Survey 1 response recorded!");
        }
        
        // Submit survey 2
        function submitSurvey2() {
            const selectedCountries = document.querySelectorAll('.survey-section:nth-child(2) input[type="checkbox"]:checked');
            
            if (selectedCountries.length === 0) {
                alert("Please select at least one country before submitting!");
                return;
            }
            
            // Update data for each selected country
            selectedCountries.forEach(checkbox => {
                let countryName = "";
                switch(checkbox.value) {
                    case "japan": countryName = "Japan"; break;
                    case "malaysia": countryName = "Malaysia"; break;
                    case "korea": countryName = "Korea"; break;
                    case "thailand": countryName = "Thailand"; break;
                    case "uk": countryName = "The UK"; break;
                    case "usa": countryName = "The USA"; break;
                    case "australia": countryName = "Australia"; break;
                    case "singapore": countryName = "Singapore"; break;
                }
                
                survey2Data[countryName]++;
            });
            
            survey2Responses++;
            
            // Show chart if it was hidden
            if (document.getElementById('destinationChart').style.display === 'none') {
                document.getElementById('destinationChart').style.display = 'block';
                document.getElementById('destinationEmptyMessage').style.display = 'none';
            }
            
            // Update chart
            destinationChart.data.datasets[0].data = Object.values(survey2Data);
            destinationChart.update();
            
            // Update response count
            document.getElementById('survey2-count').textContent = `${survey2Responses} student${survey2Responses !== 1 ? 's' : ''} ha${survey2Responses !== 1 ? 've' : 's'} responded`;
            
            // Play success sound
            playSuccessSound();
            
            // Reset selection
            document.querySelectorAll('.survey-section:nth-child(2) .option').forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input').checked = false;
            });
            
            // Show success message
            showNotification("Survey 2 response recorded!");
        }
        
        // Reset survey 1 data
        function resetSurvey1() {
            if (confirm("Are you sure you want to reset all data for Survey 1? This will delete all responses.")) {
                // Reset data
                survey1Data = {
                    "Never": 0,
                    "Once": 0,
                    "Twice": 0,
                    "3-4 times": 0,
                    "More than 5 times": 0
                };
                
                survey1Responses = 0;
                
                // Update chart
                frequencyChart.data.datasets[0].data = Object.values(survey1Data);
                frequencyChart.update();
                
                // Update response count
                document.getElementById('survey1-count').textContent = "0 students have responded";
                
                // Hide chart and show empty message
                document.getElementById('frequencyChart').style.display = 'none';
                document.getElementById('frequencyEmptyMessage').style.display = 'block';
                
                // Show notification
                showNotification("Survey 1 data has been reset.");
            }
        }
        
        // Reset survey 2 data
        function resetSurvey2() {
            if (confirm("Are you sure you want to reset all data for Survey 2? This will delete all responses.")) {
                // Reset data
                survey2Data = {
                    "Japan": 0,
                    "Malaysia": 0,
                    "Korea": 0,
                    "Thailand": 0,
                    "The UK": 0,
                    "The USA": 0,
                    "Australia": 0,
                    "Singapore": 0
                };
                
                survey2Responses = 0;
                
                // Update chart
                destinationChart.data.datasets[0].data = Object.values(survey2Data);
                destinationChart.update();
                
                // Update response count
                document.getElementById('survey2-count').textContent = "0 students have responded";
                
                // Hide chart and show empty message
                document.getElementById('destinationChart').style.display = 'none';
                document.getElementById('destinationEmptyMessage').style.display = 'block';
                
                // Show notification
                showNotification("Survey 2 data has been reset.");
            }
        }
        
        // Generate the travel report
        function generateReport() {
            // Get form values
            const title = document.getElementById('reportTitle').value;
            const surveySummary = document.getElementById('surveySummary').value;
            const personalExperience = document.getElementById('personalExperience').value;
            const favoriteDestination = document.getElementById('favoriteDestination').value;
            const conclusion = document.getElementById('conclusion').value;
            
            // Validate form
            if (!title || !surveySummary || !personalExperience || !favoriteDestination || !conclusion) {
                alert("Please fill in all sections of the report before generating!");
                return;
            }
            
            // Calculate most popular destination
            let mostPopularDestination = "";
            let maxVisits = 0;
            Object.entries(survey2Data).forEach(([country, visits]) => {
                if (visits > maxVisits) {
                    maxVisits = visits;
                    mostPopularDestination = country;
                }
            });
            
            // Calculate most common travel frequency
            let mostCommonFrequency = "";
            let maxFrequency = 0;
            Object.entries(survey1Data).forEach(([frequency, count]) => {
                if (count > maxFrequency) {
                    maxFrequency = count;
                    mostCommonFrequency = frequency;
                }
            });
            
            // Create report HTML
            const reportContent = document.getElementById('reportContent');
            reportContent.innerHTML = `
                <h3 style="color: #2a5298; text-align: center; margin-bottom: 20px;">${title}</h3>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #1e3c72; border-bottom: 2px solid #e6f0ff; padding-bottom: 5px;">Introduction</h4>
                    <p>This report summarizes our class travel survey results and shares my personal travel experiences. The purpose is to understand travel preferences among Grade 5 students at Concordia International School Shanghai.</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #1e3c72; border-bottom: 2px solid #e6f0ff; padding-bottom: 5px;">Class Survey Results</h4>
                    <p>${surveySummary}</p>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px;">
                        <div style="flex: 1; min-width: 250px;">
                            <h5 style="color: #ff7e5f;">Travel Frequency Results:</h5>
                            <p><strong>Total responses:</strong> ${survey1Responses} students</p>
                            <ul>
                                ${Object.entries(survey1Data).map(([key, value]) => 
                                    `<li><strong>${key}:</strong> ${value} student${value !== 1 ? 's' : ''}</li>`
                                ).join('')}
                            </ul>
                            ${mostCommonFrequency ? `<p><strong>Most common:</strong> ${mostCommonFrequency} (${maxFrequency} student${maxFrequency !== 1 ? 's' : ''})</p>` : ''}
                        </div>
                        
                        <div style="flex: 1; min-width: 250px;">
                            <h5 style="color: #ff7e5f;">Popular Destinations:</h5>
                            <p><strong>Total responses:</strong> ${survey2Responses} students</p>
                            <ul>
                                ${Object.entries(survey2Data).map(([key, value]) => 
                                    `<li><strong>${key}:</strong> ${value} visit${value !== 1 ? 's' : ''}</li>`
                                ).join('')}
                            </ul>
                            ${mostPopularDestination ? `<p><strong>Most popular:</strong> ${mostPopularDestination} (${maxVisits} visit${maxVisits !== 1 ? 's' : ''})</p>` : ''}
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #1e3c72; border-bottom: 2px solid #e6f0ff; padding-bottom: 5px;">My Personal Travel Experience</h4>
                    <p>${personalExperience}</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #1e3c72; border-bottom: 2px solid #e6f0ff; padding-bottom: 5px;">My Favorite Destination</h4>
                    <p>${favoriteDestination}</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #1e3c72; border-bottom: 2px solid #e6f0ff; padding-bottom: 5px;">Conclusion</h4>
                    <p>${conclusion}</p>
                </div>
                
                <div style="margin-top: 30px; padding-top: 15px; border-top: 2px dashed #2a5298; text-align: center;">
                    <p><strong>Report prepared by:</strong> A Grade 5 Student</p>
                    <p><strong>Class:</strong> Concordia International School Shanghai</p>
                    <p><strong>Date:</strong> ${new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>
                </div>
            `;
            
            // Show the report
            document.getElementById('reportResult').style.display = 'block';
            
            // Scroll to report
            document.getElementById('reportResult').scrollIntoView({ behavior: 'smooth' });
            
            // Play celebration sound
            playCelebrationSound();
            
            // Show success message
            showNotification("Your travel report has been generated successfully!");
        }
        
        // Print the report
        function printReport() {
            const printContent = document.getElementById('reportContent').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = `
                <div style="padding: 30px; max-width: 800px; margin: 0 auto;">
                    ${printContent}
                </div>
            `;
            
            window.print();
            
            // Restore original content
            document.body.innerHTML = originalContent;
            
            // Reinitialize any event listeners that were removed
            window.location.reload();
        }
        
        // Helper function to show notifications
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                font-weight: bold;
                animation: fadeInOut 3s ease-in-out;
            `;
            
            // Add keyframes for animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translateY(-20px); }
                    10% { opacity: 1; transform: translateY(0); }
                    90% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-20px); }
                }
            `;
            document.head.appendChild(style);
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remove notification after animation completes
            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }
        
        // Play success sound
        function playSuccessSound() {
            // Create audio context for simple sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("Audio context not supported");
            }
        }
        
        // Play celebration sound
        function playCelebrationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Play a short celebratory tune
                const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                
                notes.forEach((frequency, index) => {
                    setTimeout(() => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.value = frequency;
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.3);
                    }, index * 200);
                });
            } catch (e) {
                console.log("Audio context not supported");
            }
        }
    </script>
</body>
</html>